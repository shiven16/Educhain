services:
  university_a:
    build: .
    container_name: university_a
    environment:
      - NODE_NAME=university_a
      - NODE_TYPE=university
      - HTTP_PORT=3000
      - P2P_PORT=4000
    ports:
      - "3001:3000"
      - "4001:4000"
    volumes:
      - ./nodes/university_a:/app/data
    networks:
      - credential-net

  university_b:
    build: .
    container_name: university_b
    environment:
      - NODE_NAME=university_b
      - NODE_TYPE=university
      - HTTP_PORT=3000
      - P2P_PORT=4000
    ports:
      - "3002:3000"
      - "4002:4000"
    volumes:
      - ./nodes/university_b:/app/data
    networks:
      - credential-net
    depends_on:
      - university_a

  employer:
    build: .
    container_name: employer
    environment:
      - NODE_NAME=employer
      - NODE_TYPE=employer
      - HTTP_PORT=3000
      - P2P_PORT=4000
    ports:
      - "3003:3000"
      - "4003:4000"
    volumes:
      - ./nodes/employer:/app/data
    networks:
      - credential-net
    depends_on:
      - university_a

  relay:
    build: .
    container_name: relay
    environment:
      - NODE_NAME=relay
      - NODE_TYPE=relay
      - HTTP_PORT=3000
      - P2P_PORT=4000
    ports:
      - "3004:3000"
      - "4004:4000"
    volumes:
      - ./nodes/relay:/app/data
    networks:
      - credential-net
    depends_on:
      - university_a

networks:
  credential-net:
    driver: bridge